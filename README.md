# Local Storage

Frontend local storage resolution.
Store your data in localStorage, sessionStorage or a object called `_$$storage` on window.

## Install

```
componer clone local-storage
```

## Usage

Create a store instance:

```
const storage = new Storage({namespace: 'my-project'})
```

You should pass namespace in. If you do not pass in, the namespace will be 'storage' as default.
Namespace will be used amoung in localStorage, sessionStorage and `window._$$storage`, for example, your namespace is 'my-project', when you call `storage.set(key, data)`, a object will be set as `window._$$storage[md5(namespace + key)]`, so namespace is import to differentiate data with some key.

## Options

Now, you should only pass namespace as a option.

## Methods/API

### .session(key, value, expires)

Use sessionStorage to store data.

How to set new/update data?

```
storage.session('key', postData, 1800)
```

**key**

*string*

The key name of data. Keep in mind, it will be md5 hashed together with namespace so that other instances with different namespace will not make conflictions.

**value**

*string|number|array|object*

The data want to store. We will use `JSON.stringify` to keep it in storage, so your data should not be function or some other data type which is not supported.

**expires**

*number, seconds*

The seconds to keep data in storage from add/update time. Remeber, it's seconds, not micro seconds.

For example, when you run `storage.session(key, value, 1800)` and want to get value after 1800 seconds `storage.session(key)`, you will get `null`.

How to get value from session?

```
var value = storage.session(key)
```

Do not pass the second parameter.

**Notice:** As you known, a session is a semi-permanent interactive information interchange during a dialogue. Even though you have set a expires time, it will disappear after the dialogue closed.

How to remove/delete value from session?

```
storage.session(key, null)
```

Just pass null as the second parameter. The value of the key will be null, which means deleted.
However, you can pass a negative number as expires to delete it too.

### .store(key, value, expires)

Use localStorage to store data.

Usage is the same with `.session`.

**Notice:** data in localStorage is permanent. It means if you use another app (same domain, `protocol://host:port`), you can get the value if you can find out the storage data key. It is a security problem.

### .get(key)

Get data from `window._$$storage`.

As you known, window variable will be shared amoung all javascript modules. So all modules with same namespace will get the same value. For example:

```
// a.js
import Storage from 'local-storage'

var storage = new Storage({namespace: 'my-space'})
storage.set('name', 'andy')
```

```
// b.js
import Storage from 'local-storage'

var storage = new Storage({namespace: 'my-space'})
var name = storage.get('name')
```

Because namespaces are both 'my-space', so if you run a.js before b.js, name will be 'andy' finally.

### .set(key, value, expires)

Store data to `window._$$storage`.
Keep in mind, it will be md5 hashed together with namespace.

This mode will not stringify data by JSON. So you can even pass function or regexp as value.

Usage is the same with `.session`.

### .remove(key)

Remove/delete data from `window._$$storage`.

## Generator

This component is generated by [componer](https://github.com/tangshuang/componer).
If you want to modify the source code, do like this:

```
# install componer
npm i -g componer
# create a project
mkdir my-project && cd my-project && componer init
# get from registry
componer clone local-storage -u https://github.com/tangshuang/local-storage.git
# install dependencies
componer install
# build this component
componer build local-storage
```

To learn more about componer, read [this](https://github.com/tangshuang/componer).

*Notice: component is not a application, or a plugin, if you want someone to use your component, you do not need to build it into another moduleType, just provide source code. Who wanting to use your component should build his application with your component.*
